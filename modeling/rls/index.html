
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://reports.simstech.dev/modeling/rls/">
      
      <link rel="icon" href="../../assests/images/favicon.svg">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.15">
    
    
      
        <title>Row-Level Security - SimsTech.Dev</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.c382b1dc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#row-level-security" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SimsTech.Dev" class="md-header__button md-logo" aria-label="SimsTech.Dev" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart" viewBox="0 0 16 16">
  <path d="M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"/>
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SimsTech.Dev
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Row-Level Security
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://bitbucket.org/jsimshighlands/workspace/projects/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M22.2 32A16 16 0 0 0 6 47.8a26.35 26.35 0 0 0 .2 2.8l67.9 412.1a21.77 21.77 0 0 0 21.3 18.2h325.7a16 16 0 0 0 16-13.4L505 50.7a16 16 0 0 0-13.2-18.3 24.58 24.58 0 0 0-2.8-.2L22.2 32zm285.9 297.8h-104l-28.1-147h157.3l-25.2 147z"/></svg>
  </div>
  <div class="md-source__repository">
    Bitbucket
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SimsTech.Dev" class="md-nav__button md-logo" aria-label="SimsTech.Dev" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart" viewBox="0 0 16 16">
  <path d="M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"/>
</svg>

    </a>
    SimsTech.Dev
  </label>
  
    <div class="md-nav__source">
      <a href="https://bitbucket.org/jsimshighlands/workspace/projects/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M22.2 32A16 16 0 0 0 6 47.8a26.35 26.35 0 0 0 .2 2.8l67.9 412.1a21.77 21.77 0 0 0 21.3 18.2h325.7a16 16 0 0 0 16-13.4L505 50.7a16 16 0 0 0-13.2-18.3 24.58 24.58 0 0 0-2.8-.2L22.2 32zm285.9 297.8h-104l-28.1-147h157.3l-25.2 147z"/></svg>
  </div>
  <div class="md-source__repository">
    Bitbucket
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          DAX
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DAX" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          DAX
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Calculated Tables
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Calculated Tables" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Calculated Tables
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dax/custom_tables/date_table/" class="md-nav__link">
        Dates Table
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dax/custom_tables/holiday_table/" class="md-nav__link">
        Holiday Table
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Reports
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reports" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Reports
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report_templates/projection_report/" class="md-nav__link">
        Projection Report
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report_templates/funding_report/" class="md-nav__link">
        Funding Report
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report_templates/scorecard_report/" class="md-nav__link">
        Scorecard Reports
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report_templates/pullthrough_report/" class="md-nav__link">
        Pull-Through Report
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report_templates/pipeline_report/" class="md-nav__link">
        Pipeline Report
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report_templates/current_pipeline_report/" class="md-nav__link">
        Current Pipeline Report
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report_templates/disclosures_due_report/" class="md-nav__link">
        Disclosures Due
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../report_templates/forecast_report/" class="md-nav__link">
        Forecast Report
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Data Sources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data Sources" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Data Sources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/field_list/" class="md-nav__link">
        Fields List
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/users/" class="md-nav__link">
        Users
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../datasources/simple_report_export/" class="md-nav__link">
        Simple Report Export
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Modeling
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modeling" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Modeling
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Row-Level Security
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Row-Level Security
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-row-level-security-rls" class="md-nav__link">
    What is Row-Level Security (RLS)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#important-concepts" class="md-nav__link">
    Important Concepts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-rls" class="md-nav__link">
    Setting Up RLS
  </a>
  
    <nav class="md-nav" aria-label="Setting Up RLS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identifying-users" class="md-nav__link">
    Identifying Users
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-data" class="md-nav__link">
    Identifying Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-rls-role" class="md-nav__link">
    Setting Up RLS Role
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-many-to-many-relationship" class="md-nav__link">
    Setting up Many-To-Many relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-rls-using-a-bridge-table" class="md-nav__link">
    Setting up RLS using a Bridge table
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assigning-users-power-bi-web-service" class="md-nav__link">
    Assigning users - Power BI Web Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#power-bi-desktop" class="md-nav__link">
    Power BI Desktop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#power-bi-web-service" class="md-nav__link">
    Power BI Web Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-users" class="md-nav__link">
    Other Users
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        About
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-row-level-security-rls" class="md-nav__link">
    What is Row-Level Security (RLS)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#important-concepts" class="md-nav__link">
    Important Concepts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-rls" class="md-nav__link">
    Setting Up RLS
  </a>
  
    <nav class="md-nav" aria-label="Setting Up RLS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identifying-users" class="md-nav__link">
    Identifying Users
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-data" class="md-nav__link">
    Identifying Data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-rls-role" class="md-nav__link">
    Setting Up RLS Role
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-many-to-many-relationship" class="md-nav__link">
    Setting up Many-To-Many relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-up-rls-using-a-bridge-table" class="md-nav__link">
    Setting up RLS using a Bridge table
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assigning-users-power-bi-web-service" class="md-nav__link">
    Assigning users - Power BI Web Service
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#power-bi-desktop" class="md-nav__link">
    Power BI Desktop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#power-bi-web-service" class="md-nav__link">
    Power BI Web Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-users" class="md-nav__link">
    Other Users
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="row-level-security">Row-Level Security</h1>
<h2 id="what-is-row-level-security-rls">What is Row-Level Security (RLS)</h2>
<p>Row-Level Security (RLS) is a way to control access to data in a database at a row granularity. This allows users to only have access to the data that they should be authorized to see.</p>
<p>For loan origination data, RLS helps us ensure that users only have access to the same loans they would have access to the loan origination system. An example of this is to provide managers with access to specific cost centers in reports so that they only can see loan information for their region, area, or branch only. In the example below we will walk through the steps of create a role for the manager to cost center scenario. Although we are only working through the one scenario, it could be expand on to make reports that are filtered down to originators or production team level.</p>
<h2 id="important-concepts">Important Concepts</h2>
<p>Before we dig into the how to setup and use RLS its important to understand some concepts when looking at adding it to your system:</p>
<ol>
<li>How data is refreshed in your system.</li>
<li>If you are using DirectQuery as your data source there are a few more things that you will need to consider verses importing your data. There are few Microsoft knowledge base articles that cover this, one being the main <a href="https://learn.microsoft.com/en-us/power-bi/enterprise/service-admin-rls">RLS</a> by Microsoft. All templates from this site use import and can have RLS added to if needed.</li>
<li>Multiple Datasets or Reports.<ul>
<li>Depending on how you wish to have your data setup and users accessing that data you may end up with multiple datasets or reports that display the same information but one with RLS and another that does not. Example of this happening is if you have an executive team that needs to see all loan data in the system vs a group of managers that only need to see the subset of cost centers they manage.</li>
</ul>
</li>
<li>How will data be access.<ul>
<li>Users can access data via the Power BI Desktop or the Power BI Service. We will be using the <em>USERPRINCIPALNAME()</em> DAX function to identify a user and apply the correct role for them. If the user is connecting via the Power BI Web Service then you may need to consider what level of access that users has to the workspace that the data/report is stored in, please see this <a href="https://learn.microsoft.com/en-us/power-bi/enterprise/service-admin-rls#using-rls-with-workspaces-in-power-bi">Microsoft KBA</a> on using RLS with workspaces.</li>
</ul>
</li>
</ol>
<h2 id="setting-up-rls">Setting Up RLS</h2>
<p>For the below examples we are going to reference the following tables:</p>
<p><strong>LOS Data Table</strong></p>
<p><img alt="los_data_table" src="../../assests/images/rls/los_data_table.png" /></p>
<p><strong>Manager Table</strong></p>
<p><img alt="manager_table" src="../../assests/images/rls/managers_table.png" /></p>
<h3 id="identifying-users">Identifying Users</h3>
<p>To enable us to know what data a user should have access to via RLS we need to identify the user that is accessing the report. Luckily Power BI's DAX has a built in function that helps us with this, the <em>USERPRINCIPALNAME()</em> function will return a users information in the <em>user@example.com</em> format. We can then use that to build a access list or apply it to a set of a data to restrict users based on their User Principal Name, you can see this in our Managers data in the EMAIL column.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that there is also a <em>USERNAME()</em> DAX function that will return the User Principal Name when published to the Power BI Service, but when used in the Power BI Desktop version the <em>USERNAME()</em> returns the user information in the <em>DOMAIN\User</em> format where as the <em>USERPRINCIPALNAME()</em> will also return the <em>user@example.com</em> format making a little more consistent between versions.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can create a report with a blank dataset that has a set of measures, one set to <em>USERNAME()</em> and the other set to <em>USERPRINCIPALNAME()</em>. Pulling these measures out into a card visual can help see what identity you are working with and act as a troubleshooting source later when you publish the report to the Power BI Web Service.</p>
</div>
<h3 id="identifying-data">Identifying Data</h3>
<p>When applying RLS we will need to setup a filter to ensure that the user only has access to data that they are suppose to. This means the data has to have some way to group or individual identify what data a user should see. Using the <em>USERPRINCIPALNAME()</em> we would need a email address that is tied to the user for each row they would be given access to. Keep in mind that the email must match what is returned by the <em>USERPRINCIPALNAME()</em> function. In the examples below we will be using cost center to create a group that users should have access to and then use Power BI's relationships to apply the security role. In the above data set we will be building relationships off the ORGID column.</p>
<h3 id="setting-up-rls-role">Setting Up RLS Role</h3>
<p>To setup a Role that will be used for RLS first click the Manage roles button on the Model ribbon. The Model ribbon can be found while in the Report View or on the Home ribbon while in the Data or Model view. The button looks like this:</p>
<p><img alt="manage_roles_button" src="../../assests/images/rls/manage_roles_button.png" /></p>
<p>Click the Mange roles button will open the Manage roles box:</p>
<p><img alt="manage_roles" src="../../assests/images/rls/manage_roles.png" /></p>
<p>From here the <strong><em>Create</em></strong>  button is used to create a role and then write a DAX expression that is applied to the table we want to apply RLS to. Below is a Role called Manager, that is applied to the Managers table with the a DAX statement that compares the EMAIL column in the Managers table to the <em>USERPRINCIPALNAME()</em> to know which roles should be accessible to the user..</p>
<p><img alt="manage_roles_setup" src="../../assests/images/rls/manage_roles_setup.png" /></p>
<p>Clicking the <strong><em>Save</em></strong> button will save the role. Now when a user that is assigned to this role uses the dataset, the Managers table will apply RLS and only give access to those rows where the User Principal Name equals the email found in the EMAIL column.</p>
<p>We now need to apply the same RLS not only to the Managers table but have it also flow over to the LOS Data table. Next we look at two different way to accomplish this.</p>
<h3 id="setting-up-many-to-many-relationship">Setting up Many-To-Many relationship</h3>
<p>To create a Many-To-Many relationship go to the Model view in Power BI Desktop and drag the key column from one table to the table you wish to create the relationship with. In our example we will be creating a relationship on the ORGID columns. When we do this we will get a <strong><em>Create relationship</em></strong> pop-up confirming that we want to use the ORGID columns.</p>
<p><img alt="many-to-many" src="../../assests/images/rls/many_to_many_relationship.png" /></p>
<p>There are a couple of things to note on this popup:</p>
<ol>
<li>Warning about the Many-To-Many cardinality being used, make sure to take a peek at the <a href="https://learn.microsoft.com/en-us/power-bi/transform-model/desktop-many-to-many-relationships">learn more</a> link provided and understand what this could mean for you environment. If Many-To-Many does not work check out the next example using a bridge table instead.</li>
<li>Under the Cross filter direction, we want to make sure to check the <em>Apply security filter in both dicrection</em> checkbox so that the Role applied to the Managers table will filter to the LOS Data table through the relationship.</li>
</ol>
<p>Once you click <strong><em>OK</em></strong> the model view will be updated like below showing the relationship line between the two tables:</p>
<p><img alt="many_to_many_relationship" src="../../assests/images/rls/many_to_many_model.png" /></p>
<p>With this in place when a user accesses the dataset, the Manager role filters the Managers table down to the cost centers they have access to and that in turn (because of the Apply security filter checkbox) flows down to the LOS Data, making sure that the user only sees loan data for the cost centers they have been allowed to.</p>
<h3 id="setting-up-rls-using-a-bridge-table">Setting up RLS using a Bridge table</h3>
<p>An alternative to using a Many-To-Many relationship, is to build a bridge table that contains the unique values of your key fields and then connecting the tables through this new table. In our example we would create a bridge table that contains the ORGID only, using the following DAX statement:</p>
<div class="highlight"><pre><span></span><code><span class="n">ORGID</span><span class="w"> </span><span class="n">Only</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">CALCULATETABLE</span><span class="p">(</span><span class="n">DISTINCT</span><span class="p">(</span><span class="err">&#39;</span><span class="n">LOS</span><span class="w"> </span><span class="n">Data</span><span class="err">&#39;</span><span class="p">[</span><span class="n">ORGID</span><span class="p">]),</span><span class="w"> </span><span class="n">NOT</span><span class="p">(</span><span class="n">ISBLANK</span><span class="p">(</span><span class="err">&#39;</span><span class="n">LOS</span><span class="w"> </span><span class="n">Data</span><span class="err">&#39;</span><span class="p">[</span><span class="n">ORGID</span><span class="p">])))</span><span class="w"></span>
</code></pre></div>
<p>This would create a table called <em>ORGID ONLY</em> with all the unique (non-blank) ORGIDS from the LOS Data table:</p>
<p><img alt="orgid_table" src="../../assests/images/rls/orgid_table.png" /></p>
<p>To create the relationships between the tables, we drag the ORGID column from the ORGID Only table over top the ORGID column in the Managers table and then drag the ORGID column from the ORGID Only table over the ORGID column in the LOS Data table. This will result in a model that looks like the below with a set One-To-Many relationships going from the bridge table to the Managers and LOS Data tables:</p>
<p><img alt="one_to_many_relationship" src="../../assests/images/rls/one_to_many_relationship.png" /></p>
<p>To apply the RLS role to a relationship we need double click on the line that goes between the Managers table the ORGID Only table to get the <strong>Edit Relationship</strong> box to pop-up. We need to change the <strong><em>Cross filter direction</em></strong> dropdown to <strong>Both</strong> and check the <strong>Apply security filter in both directions</strong> check box:</p>
<p><img alt="one_to_many_edit_relationship" src="../../assests/images/rls/one_to_many_edit_relationship.png" /></p>
<p>With the RLS role and relationship with security check box checked setup, the filter applied from the Manager role will filter down from the Managers table to the ORGID Only table and then finally to the LOS Data table, making so that users only see the loan data for the cost centers they have been allowed to.</p>
<h2 id="assigning-users-power-bi-web-service">Assigning users - Power BI Web Service</h2>
<p>Once Row-Level Security has been configured using the Desktop application the report can be published to the Power BI Web Service and the security permissions setup on the dataset. To do this publish the report to a workspace then navigate to the dataset for that report. Hovering your mouse over the dataset will provide additional options to the right of the dataset name. Click on the three dots (...) will pop-up an options menu with the Security option:</p>
<p><img alt="pbis_options" src="../../assests/images/rls/pbis_security.png" /></p>
<p>Selecting the Security options will open the Row-Level Security page, users can be added to the Role via user email address or by a user group that the user belongs to.</p>
<p><img alt="pbis_rls" src="../../assests/images/rls/pbis_rls.png" /></p>
<p>Using our example from above if we were to add Mike, Mary, and Marge's emails to this Role, when they view this report in the Power BI Web Service they would only be able to see those cost centers that they have been assigned to through the Manager Table.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="power-bi-desktop">Power BI Desktop</h3>
<p>It can be handy to see what a user would see when the Role they are assigned to is in use. To do this in Power BI Desktop go to the Modeling Ribbon in your report that has RLS roles setup and click the <em>View as</em> option in the Security section:</p>
<p><img alt="view_as" src="../../assests/images/rls/view_as.png" /></p>
<p>This will open the View as roles page allowing you to select the role you are wanting to test along with checking the <em>Other user</em> option and typing the email or domain/username of the user you would like to test as:</p>
<p><img alt="view_role_as" src="../../assests/images/rls/view_role_as.png" /></p>
<h3 id="power-bi-web-service">Power BI Web Service</h3>
<p>In the Power BI Web Service you can test what a user sees by going to Row-Level Security page (were we assign users to the role), and hover over the Role name on the left and click the three docs (...) that show up to the right of the Role name. This will give an option of <em>Test as role</em>. Click this will open the report tied to the dataset and give you an option at the top to change who you are viewing the report as by change the <em>Now view as:</em> dropdown and providing a email address:</p>
<p><img alt="pbis_view_as" src="../../assests/images/rls/pbis_view_role_as.png" /></p>
<h2 id="other-users">Other Users</h2>
<p>The above walked through an example of using Row-Level Security through a relationship. If your data happens to contain the email that matches the user principal name in a column then you don't need to use a relationship and can assign the role directly to your data table. This can be handy if you want to give production or operation user access to a report but only want them to have access to the loans they have been assigned to. Keep in mind though that this will only work if the column in your data table that contains the email matches the user principal name when the user access the Power BI Web Service.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../datasources/simple_report_export/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Simple Report Export" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Simple Report Export
            </div>
          </div>
        </a>
      
      
        
        <a href="../../about/" class="md-footer__link md-footer__link--next" aria-label="Next: About" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              About
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.a6c66575.min.js"></script>
      
    
  </body>
</html>